#진행상황

- 시작 : 7/2 ~
- 처음 생각했던 접근방식이 잘못 된 것을 확인
  - 이미지를 전처리하여 윤곽선을 선명하게 하여 cv2.findcontours를 이용하여 경계를 얻는다.
  - 여기서 contours들의 크기, 가로 세율 비율등으로 번호판이 될만한 contours들로 걸러낸다.
  - 이후에 번호판의 글자들은 연속적으로 이어져있는것을 활용하여 기울기 변화가 적은 것을 번호판이라고 판단.
  - 하지만 상황에따라 기울어진 번호판, 혹은 카메라 위치에따라 번호판이 기울기가 큰것도 있다.
  - 이 방법은 general 하지 않다고 생각. (~7/2)


- 수정 방안 검토 중 (7/4 ~ 7/19)
  - https://github.com/MicrocontrollersAndMore/OpenCV_3_License_Plate_Recognition_Python 참고 중
  - 여기서는 전처리 과정에서 대비를 확실하게 주어서 좀 더 명확한 imgthresholdsscene을 얻을 수 있었다.
  - 이 전 방법에서의 canny를 활용하여도 충분하지 않을까? ( 두가지 다 확인해 볼 예정 ) => 큰 차이는 없었다.
  - KNN을 사용한 방법. (공부 필요)
  
  - 공부 결과
    - KNN을 사용하는 이유 : 이미지에서 contour들을 구하여 클러스터링하여 번호판에 해당하는 것을 구한다.
    - KNN은 지도학습 이다 => 데이터셋이 필요하다.
    - 비지도 학습 클러스터링에는 K-Means 등이 있다.
    - 비지도 학습? 지도 학습?
    - 혹은 번호판 이미지 데이터셋이 있다면 학습을 통해 새로운 이미지에서 번호판 추출가능 => OCR을 통해 구분?rr
    
  - 결론 : 우선 처음 생각했던 것을 이용. 하지만, 번호판이 기울어진 경우에도 인식시키기 위해서 cv2.warpaffine 을 사용하여 번호판을 rotate시킬 것이다.
    (7/9)
    
  - 7/9 : 하지만, 번호판 contour들의 후보군을 줄이는 것에서 조건을 정하였는데 후보군에 들어오는 contours들이 없다고 나온다.
  
  - 7/17 : 현재까지 진행상황. https://www.youtube.com/watch?v=PpTl7xxGXh4&vl=ko 이 영상을 참고하여 KNN이 아닌 번호판의 특성을 이용하여 추출하는 방식을 만들고 있지만, 영상과 같은 이미지를 사용함에도 불구하고 같은 결과값이 나오지 않는다. 번호판 후보군을 추출하기 위한 파라미터를 수정해보았지만 번호판만을 추출되지 않음. 
  KNN을 이용한 것도 결국은 번호판의 크기 등에 대한 데이터셋을 확보하여 이를 학습한 딥러닝을 이용하는 것이다. 확실히 정확도는 올라가겠지만 과연?? => 해보자.
  
  - 7/19 : 번호판 후보군은 여전히 있었지만 결과적으로 견본이미지에 대해서는 추출이 가능했다. 
  - 더불어서 pytesseract가 정상 작동하기 시작했다. 위의 영상에서는 config를 설정했었지만 오히려 config설정을 없애니 글자를 더 잘 읽어냈다.
  

  
![20190719](https://user-images.githubusercontent.com/38280229/61512166-fe6b2700-aa33-11e9-870e-d676c7e80b09.png)


  - 번호판들의 다른 특징들은 없을까?? 혹은 머신러닝을 이용. (7/19 ~ 7/24) 
    - 번호판들을 명확하게 부각시키기 위해 Thresholding이 필요.
    - threshold 함수를 이용한 thresholding의 경우 여러 조명이 있을경우 등 다양한 환경에서 좋은 성능을 기대하기 어렵다 => adaptive threshold를 이용
    - https://d2.naver.com/helloworld/8344782 
  
  - 7/24 
    
    1. 이미지 특징 추출 - https://datascienceschool.net/view-notebook/7eb4b2a440824bb0a8c2c7ce3da7a4e2/
      엣지 추출(Laplacian), 캐니 엣지 추출 활용가능 할 것이다. 
      결국, 엣지들을 찾고, 거기서 contour를 찾는 방식. contour외에는 다른 특징은 없을까? 
    
    2. 이미지 세그먼테이션에 대해 공부.
      
      segmentation 문제는 주어진 이미지 안에 어느 특정한 클래스에 해당하는 사물이 어느 위치에 포함되어 있는지 '픽셀 단위로'분할하는 모델을 만드는 것을 목표로 한다. 이는 사물의 위치를 바운딩 박스로 표혀시하는 Detection 문제보다 더 자세하게 위치를 표시해야 하기 때문에, Detection 문제보다 더 어려운 문제에 해당한다. Sementic segmentation 과 Instance segmentation 의 두가지 세부 문제로 구분할 수 있다. segmentation 문제는 모든 픽셀에 ㅐ하여 ㄷ클래스 분류를 수행해야 한다는 점에서 소요시간이 매우 길다. 따라서 적합하지 않을 것으로 보인다
    
    3. 결국 어떤 상황에서도 대응하기 위해서는 이미지 detection을 통해 번호판을 추출해내야 할 것 같다.
    
 - 7/30
 
   1. yolo를 이용하여 간단하게 학습시켜 보기로 결정했다.
   
   2. 우선 학습시키기 위해 이미지 크롤링을 통해서 자동차 번호판에 대한 이미지를 모았다. 이미지 크롤링은 https://yoyoii.tistory.com/400 를 참고 하였다. '차번호판', '차량번호판'등 여러 키워드를 통해 크롤링하고 적당한 이미지를 추려서 학습에 이용했다.
   
   3. 학습에 이미지를 사용하기 위해서 번호판들을 yolo_mark를 통해 표시하여 학습에 이용했다.
   
   4. 실제로 학습을 시키고 iteration = 1000 결과 나온  weight를 이용하여 웹캠에 인식시켜본 결과 번호판 이미지에 대해 반응하는 것을 볼 수 있었다. 이를 이용하여, 찾아낸 번호판 사각형과 그 주변을 알맞게 오려내어 적당한 가공을 통해 ocr이 인식하기 쉽도록 만들어서 인식 시켜볼 예정이다.
   
   ![3](https://user-images.githubusercontent.com/38280229/62217551-ca094a80-b3e5-11e9-8d44-14407bdea160.png)
  
